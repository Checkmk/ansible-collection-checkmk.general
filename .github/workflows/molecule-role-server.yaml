# https://github.com/ansible-collections/collection_template/blob/main/.github/workflows/ansible-test.yml

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

name: Role Server
on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 * * 0'
  pull_request:
    branches:
      - main
      - devel
    types:
      - opened
    paths:
      - 'roles/server/**'
      - '.github/workflows/molecule-role-server.yaml'
  push:
    paths:
      - 'roles/server/**'
      - '!roles/**/*.md'
      - '.github/workflows/molecule-role-server.yaml'

jobs:

  integration:
    name: "Molecule"
    uses: ./.github/workflows/_template-molecule-test.yaml
    with:
      role: server
